% Required to support mathematical unicode
\usepackage[warnunknown, fasterrors, mathletters]{ucs}
\usepackage[utf8x]{inputenc}
\usepackage[cm]{fullpage}
\usepackage[english]{babel}
% Always typeset math in display style
\everymath{\displaystyle}

% Standard mathematical typesetting packages
\usepackage{amsfonts, amsthm, amsmath, amssymb}
\DeclareMathSymbol{\shortminus}{\mathbin}{AMSa}{"39}
\usepackage{mathtools}  % Extension to amsmath
\usepackage[fontsize=14pt]{scrextend}

% Symbol and utility packages
\usepackage{cancel, textcomp}
\usepackage[mathscr]{euscript}
\usepackage[nointegrals]{wasysym}

% Extras
\usepackage{physics}  % Lots of useful shortcuts and macros
\usepackage{tikz-cd}  % For drawing commutative diagrams easily
\usetikzlibrary{angles}
\usepackage{color}  % Add some colour to life
\usepackage{microtype}  % Minature font tweaks
\usepackage{mathrsfs}  % For curly sets
\usepackage{polynom}

% Common shortcuts
\def\mbb#1{\mathbb{#1}}
\def\mfk#1{\mathfrak{#1}}

\def\N{\mbb{N}}
\def\C{\mbb{C}}
\def\R{\mbb{R}}
\def\pr{\mbb{P}}
\def\Q{\mbb{Q}}
\def\Z{\mbb{Z}}

\def\la{\leftarrow}
\def\La{\Leftarrow}
\def\ra{\rightarrow}
\def\Ra{\Rightarrow}
\def\({\left(}
\def\){\right)}
\def\lk{\left[}
\def\rk{\right]}
\def\lb{\left\{}
\def\rb{\right\}}

\def\del{\nabla}
\def\eps{\varepsilon}
\def\inv{{-1}}
\def\pa{\partial}
\def\vp{\varphi}
\def\y{\infty}
\def\th{\theta}

% Sometimes helpful macros
\newcommand{\func}[3]{#1\colon#2\to#3}
\newcommand{\vfunc}[5]{\func{#1}{#2}{#3},\quad#4\longmapsto#5}
\newcommand{\floor}[1]{\left\lfloor#1\right\rfloor}
\newcommand{\ceil}[1]{\left\lceil#1\right\rceil}
\newcommand{\pdif}[3]{\frac{\partial^{#3}#1}{\partial#2^{#3}}}

% Colors in figures
\definecolor{r}{HTML}{ff3030}
\definecolor{b}{HTML}{00bfff}
\definecolor{o}{HTML}{ff7e00}

\makeatletter
% stolen from source2e
\bgroup
\lccode`\~=`\ %
\lccode`\}=`\ %
\catcode`\ =11\relax%
\lowercase{%
\egroup%
\protected\long\def\@errmessage#1{%
\begingroup%
\edef
\@err@                                                                 %
{{}}%
\errhelp
\@err@                                                                 %
\let
\@err@                                                                 %
\@empty
\def~{\errmessage{#1%
\@err@                                                                 %
}}%
~%
\endgroup%
}}%

% getline
\begingroup
\catcode`\^^M=12\relax%
\def\@@{%
  \def\getline##1{%
    \begingroup%
    \endlinechar=`\^^M%
    \catcode`\^^M=12\relax%
    \@getline{##1}%
  }%
  \long\def\@getline##1##2^^M{%
    \endgroup%
    ##1{##2}%
  }%
}%
\expandafter\endgroup%
\@@%

\def\xgetline#1{%
  \def\@@{\getline{#1}}%
  \futurelet\@next\@xgetline%
}%
\def\@xgetline{%
  \ifx\@next\@sptoken
    \expandafter\@firstoftwo
  \else
    \expandafter\@secondoftwo
  \fi
  {\afterassignment\@@ \let\@next= }%
  {\@@}%
}%

\ExplSyntaxOn
% list of known factoids
\seq_new:N \g_factoids_seq

% error handling
\cs_new_protected:Npn \factoids_error_aux:nn #1#2 {
  \@errmessage {
    #1^^J
    List~of~known~factoids:^^J
    \space\space
    #2
  }
}
\makeatother
\cs_generate_variant:Nn \factoids_error_aux:nn { nx }
\cs_new_protected:Npn \factoids_error:n #1 {
  \factoids_error_aux:nx { #1 } {
    \seq_if_empty:NF \g_factoids_seq { ` }
    \seq_use:Nnnn \g_factoids_seq { `~and~` } { `,~` } { `,~and~` }
    \seq_if_empty:NF \g_factoids_seq { ` }
  }
}
\cs_generate_variant:Nn \factoids_error:n { x }

% factoid creation
\cs_new_protected:Npn \factoids_new:nn #1#2 {
  \tl_new:c { g__factoids_factoid / #1 / _tl }
  \tl_gset:cn { g__factoids_factoid / #1 / _tl } {#2}
  \seq_gput_right:Nn \g_factoids_seq {#1}
}

% factoid usage
\cs_new_protected:Npn \factoids_invoke:n #1 {
  \tl_if_empty:nTF { #1 }
    { \factoids_error:x { Usage:~\string\.<factoid~name> } }
    {
      \tl_if_exist:cTF { g__factoids_factoid / #1 / _tl }
        { \tl_use:c { g__factoids_factoid / #1 / _tl } }
        { \factoids_error:x { `#1`~is~not~a~known~factoid! } }
    }
}

% user interface
\cs_new_protected_nopar:Npn \DeclareFactoid { \factoids_new:nn }
\cs_new_protected_nopar:Npn \factoid { \getline \factoids_invoke:n }
\cs_gset_protected_nopar:Npn \. { \xgetline \factoids_invoke:n }
\ExplSyntaxOff

% Common instructional requests
\DeclareFactoid{original}{Please post original question, exactly as is. Screenshot or picture is best.}

% American High school Algebra and Geometry
\DeclareFactoid{cts}{%
  {\bfseries Completing the square}

  \medskip
  Consider:
  \[
    \left(x + \frac b2\right)^2 = x^2 + bx + \left(\frac b2\right)^2.
  \]

  Adding $\left(\frac b2\right)^2$ to $x^2 + bx$ will make it a perfect square.

  Doing so will change the value of the expression.

  However we can add and subtract $\left(\frac b2\right)^2$, which is adding $0$.
  \begin{align*}
    x^2 + bx + c & = x^2 + bx + \left(\frac b2\right)^2 + c - \left(\frac b2\right)^2 \\
    x^2 + bx + c & = \left(x + \frac b2\right)^2 + c - \left(\frac b2\right)^2
  \end{align*}%
}

\DeclareFactoid{power rules}{%
  \begingroup\def\arraystretch{1.3}
  \textbf{Rules for Powers/Exponents} \\
  \begin{tabular}{|l|l|}
    \hline
    Product Rule        & $a^xa^y=a^{x+y}$                \\ \hline
    Negative Exponent   & $a^{-x}=\tfrac{1}{a^x}$         \\ \hline
    Quotient Rule       & $\tfrac{a^x}{a^y}=a^{x-y}$      \\ \hline
    Power of Power      & $\left(a^x\right)^y=a^{xy}$     \\ \hline
    Distributivity      & $(ab)^x=a^xb^x$                 \\ \hline
    Zero Exponent       & $a^0=1$                         \\ \hline
    Fractional Exponent & $a^{\frac{x}{y}}=\sqrt[y]{a^x}$ \\ \hline
  \end{tabular}
  \endgroup
}

\DeclareFactoid{log xp rule}{\[\log_{a^b}(c^d) \equiv \frac{d}{b}\log_a(c)\]}

\DeclareFactoid{point slope}{%
  For linear equation $f(x)$ with slope $m$ that passes through $(a,b)$:
  \[
    f(x) = m(x-a) + b
  \]%
}

% American High school Algebra 2 and Trigonometry
\DeclareFactoid{sohcahtoa}{%
  \textbf{Definitions of sin/cos/tan}

  \begin{minipage}[b]{.4\linewidth}
    \begin{align*}
      \sin\th & = \frac{\text{Opposite}}{\text{Hypotenuse}} \\
      \cos\th & = \frac{\text{Adjacent}}{\text{Hypotenuse}} \\
      \tan\th & = \frac{\text{Opposite}}{\text{Adjacent}}
    \end{align*}
  \end{minipage}
  \begin{tikzpicture}
    \path coordinate (A) at (0, 0)
          coordinate (B) at (0, 3)
          coordinate (C) at (6.3, 0);
    \draw [very thick] (A) -- node [above, sloped] {Opposite} (B)
                           -- node [above, sloped] {Hypotenuse} (C)
                           -- node [below, sloped] {Adjacent} cycle;
    \path pic [draw, thick, angle radius=.5cm] {right angle=C--A--B}
          pic [draw, thick, angle radius=1.8cm, angle eccentricity=1.3, pic text=$\theta$] {angle=B--C--A};
  \end{tikzpicture}%
}

\DeclareFactoid{geom trig def}{%
  \def\angle{55}

  \pgfmathsetmacro{\r}{1}
  \pgfmathsetmacro{\s}{sin(\angle)}
  \pgfmathsetmacro{\c}{cos(\angle)}

  %color
  \definecolor{g}{HTML}{50C878}

  \begin{tikzpicture}[scale=5,very thick]

    % grey axis
    \draw[gray!30] (0,0) -- (0,1/\s+.1);
    \draw[gray!30] (0,0) -- (1/\c+.1,0);

    % arc of the angle
    \draw (1/5,0) node[sloped,anchor=south east] {$\boldsymbol{\theta}$} arc (0:\angle:1/5);

    % cos and sin
    \draw (0,0) --node [sloped,above]{1} (\angle:1);
    \draw (0,\s) -- node [below]{$\boldsymbol{\cos(\theta)}$} (\c,\s);
    \draw (\c,\s)-- node [right]{$\boldsymbol{\sin(\theta)}$}(\c,0);

    % quarter circle :
    \draw (1,0) arc(0:90:1);

    % big triangle (sec, tan, csc, cot):
    \draw [r] (0   ,0 ) -- node [below] {$\boldsymbol{\sec(\theta)}$} (1/\c,0);
    \draw [b] (1/\c,0) -- node [sloped,above] {$\boldsymbol{\tan(\theta)}$} (\c,\s);
    \draw [o] (0  ,  0) -- node [left=1mm] {$\boldsymbol{\csc(\theta)}$} (0,1/\s);
    \draw [g] (0,1/\s) -- node [sloped,above] {$\boldsymbol{\cot(\theta)}$} (\c,\s);
  \end{tikzpicture}
}

\DeclareFactoid{double cos}{%
  \begin{align*}
    \cos (2\th) &= \cos^2(\th) - \sin^2(\th) \\
      &= 2\cos^2(\th) - 1 \\
      &= 1 - 2\sin^2(\th)
  \end{align*}%
}

\DeclareFactoid{sum diff trig}{%
  \begin{spreadlines}{1.5ex}
    \begin{alignat*}{2}
      \sin (\th \pm \vp) &= \sin(\th)\cos(\vp) \pm \cos(\th)\sin(\vp) \\
      \cos (\th \pm \vp) &= \cos(\th)\cos(\vp) \mp \sin(\th)\sin(\vp) \\
      \tan (\th \pm \vp) &= \frac{\tan(\th) \pm \tan(\vp)}{1 \mp \tan(\th)\tan(\vp)}
    \end{alignat*}
  \end{spreadlines}
}

\DeclareFactoid{recip trig}{%
  \begin{spreadlines}{1.5ex}
    \begin{alignat*}{2}
      \csc(x) & = \tfrac 1 {\sin(x)}, \quad & \tan(x) & = \tfrac {\sin(x)} {\cos(x)} \\
      \sec(x) & = \tfrac 1 {\cos(x)}, \quad & \cot(x) & = \tfrac {\cos(x)} {\sin(x)}
    \end{alignat*}
  \end{spreadlines}
}

% trig reflect identities
\DeclareFactoid{reflect trig}{%
  \begin{spreadlines}{1.5ex}
    \begin{alignat*}{3}
      \sin(-x) &= -\sin(x), \quad & \sin(\tfrac\pi2 - x) &= \cos(x), \quad & \sin(\pi - x) &= \hphantom-\sin(x) \\
      \cos(-x) &= \hphantom-\cos(x), \quad & \cos(\tfrac\pi2 - x) &= \sin(x), \quad & \cos(\pi - x) &= -\cos(x) \\
      \tan(-x) &= -\tan(x), \quad & \tan(\tfrac\pi2 - x) &= \tfrac1{\tan(x)}, \quad & \tan(\pi - x) &= -\tan(x)
    \end{alignat*}
  \end{spreadlines}
}

% trig shift identities
\DeclareFactoid{shift trig}{%
  \begin{spreadlines}{1.5ex}
    \begin{alignat*}{2}
      \sin\left(\frac\pi2 + x\right) &=  \cos(x), \quad & \sin\left(\pi + x\right) &= -\sin(x) \\
      \cos\left(\frac\pi2 + x\right) &= -\sin(x), \quad & \cos\left(\pi + x\right) &= -\cos(x) \\
      \tan\left(\frac\pi2 + x\right) &= -\frac{1}{\tan(x)}, \quad & \tan\left(\pi + x\right) &=  \tan(x)
    \end{alignat*}
  \end{spreadlines}
}

% all trig identities (shift and reflect) minimize in one table
\DeclareFactoid{reflect shift trig}{
  \tabskip=0pt
  \setbox2=\hbox{\vrule height3.5ex depth3ex width0pt}
  \halign{
    \unhcopy2\strut#&\vrule#\tabskip=1em&\hfil$#$\hfil&\vrule#&\hfil$#$\hfil&\vrule#&\hfil$#$\hfil&\vrule#&\hfil$#$\hfil&\vrule#&\hfil$#$\hfil&#\vrule\tabskip=0pt\cr
    \noalign{\hrule}
    &&\th&&\frac{\pi}{2} - x&&\frac{\pi}{2} + x&&\pi - x&&\pi +x&\cr
    \noalign{\hrule}
    &&\sin(\th)&&\cos(x)&&\cos(x)&&\sin(x)&&-\sin(x)&\cr
    \noalign{\hrule}
    &&\cos(\th)&&\sin(x)&&-\sin(x)&&-\cos(x)&&-\cos(x)&\cr
    \noalign{\hrule}
    &&\tan(\th)&&\frac{1}{\tan(x)}&&\frac{-1}{\tan(x)}&&-\tan(x)&&\tan(x)&\cr
    \noalign{\hrule}
  }
}

% long list of trig identities
\DeclareFactoid{rocket trig}{
  \text{Defining relations:} \hspace{3cm} $\approx \mathcal{O}\omega \mathcal{O}\approx$
  \begin{flalign*}
    &\quad \csc(x) = \tfrac1{\sin(x)}\quad\tan(x) = \tfrac{\sin(x)}{\cos(x)} &\\
    &\quad \sec(x) = \tfrac1{\cos(x)}\quad\cot(x) = \tfrac1{\tan(x)} = \tfrac{\cos(x)}{\sin(x)}&
  \end{flalign*}
  \text{Pythagoras:}
  \begin{flalign*}
    &\quad \sin^2(x) + \cos^2(x) = 1 &\\
    &\quad 1 + \cot^2(x) = \csc^2(x) &\\
    &\quad \tan^2(x) + 1 = \sec^2(x)&
  \end{flalign*}
  \text{Cofunction, Negative angle, and Supplement:}
  \begin{flalign*}
    &\quad \sin(x) = \cos(\tfrac\pi2-x)\quad\sin(-x) = -\sin(x) &\\
    &\quad \cos(x) = \sin(\tfrac\pi2-x)\quad\cos(-x) = \cos(x) &\\
    &\quad \tan(x) = \cot(\tfrac\pi2-x)\quad\tan(-x) = -\tan(x) &\\
    &\quad \sin(\pi-x) = \sin(x) &\\
    &\quad \cos(\pi-x) = -\cos(x) &\\
    &\quad \tan(\pi-x) = -\tan(x) &
  \end{flalign*}
  \text{Periodicity: for all} $n\in\Z$
  \begin{flalign*}
    &\quad \sin(x + 2\pi n) = \sin(x) &\\
    &\quad \cos(x + 2\pi n) = \cos(x) &\\
    &\quad \tan(x + \pi n) = \tan(x) &
  \end{flalign*}
  \text{Addition:}
  \begin{flalign*}
    &\quad \sin(x\pm y) = \sin(x)\cos(y)\pm\cos(x)\sin(y) &\\
    &\quad \cos(x\pm y) = \cos(x)\cos(y)\mp\sin(x)\sin(y) &\\
    &\quad \tan(x\pm y) = \tfrac{\tan(x)\pm\tan(y)}{1\mp\tan(x)\tan(y)} &
  \end{flalign*}
  \text{Double angle:}
  \begin{flalign*}
    &\quad \sin(2x) = 2\sin(x)\cos(x) &\\
    &\quad \cos(2x) = \cos^2(x)-\sin^2(x) \\
    &\quad \cos(2x) = 2\cos^2(x)-1 = 1-2\sin^2(x) &\\
    &\quad \tan(2x) = \tfrac{2\tan(x)}{1-\tan^2(x)} &
  \end{flalign*}
  \text{Sum--to--product and Product--to--sum:}
  \begin{flalign*}
    &\quad \cos(x) + \cos(y) = 2\cos(\tfrac{x + y}2)\cos(\tfrac{x-y}2) &\\
    &\quad \cos(x)-\cos(y) = -2\sin(\tfrac{x + y}2)\sin(\tfrac{x-y}2) &\\
    &\quad \sin(x)\pm\sin(y) = 2\sin(\tfrac{x\pm y}2)\cos(\tfrac{x\mp y}2) &\\
    &\quad 2\sin(x)\sin(y) = \cos(x-y)-\cos(x + y) &\\
    &\quad 2\sin(x)\cos(y) = \sin(x + y) + \sin(x - y) &\\
    &\quad 2\cos(x)\cos(y) = \cos(x + y) + \cos(x - y) &
  \end{flalign*}
}

\DeclareFactoid{unit circle}{%
  \begin{tikzpicture}[scale=4.5, font=\small]
    \def\angles{
      0/2\pi/1/0,
      30/\frac\pi6/\frac{\sqrt3}2/\frac12,
      45/\frac\pi4/\frac{\sqrt2}2/\frac{\sqrt2}2,
      60/\frac\pi3/\frac12/\frac{\sqrt3}2,
      90/\frac\pi2/0/1,
      120/\frac{2\pi}3/\shortminus\frac12/\frac{\sqrt3}2,
      135/\frac{3\pi}4/\shortminus\frac{\sqrt2}2/\frac{\sqrt2}2,
      150/\frac{5\pi}6/\shortminus\frac{\sqrt3}2/\frac12,
      180/\pi/\shortminus1/0,
      210/\frac{7\pi}6/\shortminus\frac{\sqrt3}2/\shortminus\frac12,
      225/\frac{5\pi}4/\shortminus\frac{\sqrt2}2/\shortminus\frac{\sqrt2}2,
      240/\frac{4\pi}3/\shortminus\frac12/\shortminus\frac{\sqrt3}2,
      270/\frac{3\pi}2/0/\shortminus1,
      300/\frac{5\pi}3/\frac12/\shortminus\frac{\sqrt3}2,
      315/\frac{7\pi}4/\frac{\sqrt2}2/\shortminus\frac{\sqrt2}2,
      330/\frac{11\pi}6/\frac{\sqrt3}2/\shortminus\frac12
    }
    \begin{scope}[every node/.style={inner sep=1pt, outer sep=0pt}]
      \foreach \a/\at/\x/\y in \angles {
        \begin{pgfinterruptboundingbox}
          \node (x) at (\a : 1.15) [anchor=\a-180] {\phantom{$\textstyle\left({\color b \x}, {\color o \y}\right)$}};
          \clip [rounded corners] (x.south west) rectangle (x.north east) (-1.6, -1.6) -- (1.6, -1.6) -- (1.6, 1.6) -- (-1.6, 1.6) -- cycle;
          \node (x) at (\a : 0.85) [anchor=\a] {\phantom{$\textstyle\at$}};
          \clip [rounded corners] (x.south west) rectangle (x.north east) (-1.6, -1.6) -- (1.6, -1.6) -- (1.6, 1.6) -- (-1.6, 1.6) -- cycle;
          \node (x) at (\a : 0.65) [anchor=\a, font=\footnotesize] {\phantom{$\textstyle\a^\circ$}};
          \clip [rounded corners] (x.south west) rectangle (x.north east) (-1.6, -1.6) -- (1.6, -1.6) -- (1.6, 1.6) -- (-1.6, 1.6) -- cycle;
          \clip (\a : 1) circle [radius=.5pt] (-1.6, -1.6) -- (-1.6, 1.6) -- (1.6, 1.6) -- (1.6, -1.6) -- cycle;
        \end{pgfinterruptboundingbox}
      }

      \draw [r, thick] (-1.5, 0) edge [-{Classical TikZ Rightarrow[length=5pt, width=6pt]}] (1.5, 0) node at (1.5, 0) [right=5pt] {$\textstyle\color b x$}
      (0, -1.5) edge [-{Classical TikZ Rightarrow[length=5pt, width=6pt]}] (0, 1.5) node at (0, 1.5) [above=5pt] {$\textstyle\color o y$};
      \draw [very thick] (0, 0) circle [radius=1];

      \foreach \a/\at/\x/\y in \angles { \draw [opacity=.4] (0, 0) -- (\a : 1); }
    \end{scope}

    \scoped [every node/.style={inner sep=1pt, outer sep=0pt}] {
      \foreach \a/\at/\x/\y in \angles {
        \node at (\a : 1.15) [anchor=\a-180, rounded corners] {$\textstyle\left({\color b \x}, {\color o \y}\right)$};
        \node at (\a : 0.85) [anchor=\a, rounded corners] {$\textstyle\at$};
        \node at (\a : 0.65) [anchor=\a, rounded corners, font=\footnotesize] {$\textstyle\a^\circ$};
        \draw [thick] (\a : 1) circle [radius=.5pt];
      }
    }

    \node at (1, 1.5) [thick, draw=r, rounded corners=6pt] {$\textstyle\left({\color b \cos(\theta)}, {\color o \sin(\theta)}\right)$};
    % \node at (0, 1.8) [font={\Huge\sffamily}] {Unit Circle};
  \end{tikzpicture}%
}

\DeclareFactoid{demoivre}{$(e^{ix})^n = (\cos(x) + i\sin(x))^n = \cos(nx) + i\sin(nx)$}

% First year university/college Calculus
\DeclareFactoid{diff rules}{%
  \begin{tabular}{lcc}
    \textbf{Rule Name} & \textbf{Function} & \textbf{Derivative} \\ \hline
    \rule{0pt}{4ex}Constant multiple & $ cf(x)$ & $cf'(x) $\\
    \rule{0pt}{4ex}Power Rule & $ x^n$ & $n x^{n-1} $\\
    \rule{0pt}{4ex}Sum Rule & $ f(x) + g(x)$ & $ f'(x) + g'(x) $\\
    \rule{0pt}{4ex}Product Rule & $ f(x)\cdot g(x)$ & $ f'(x)\cdot g(x) + f(x) \cdot g'(x) $\\
    \rule{0pt}{4ex}Quotient Rule & $ \frac{f(x)}{g(x)}$ & $\frac{f'(x)\cdot g(x) - f(x)\cdot g(x)}{[g(x)]^2} $\\
    \rule{0pt}{4ex}Chain Rule notation 1 & $f(g(x))$ & $ f'(g(x)) \cdot g'(x) $\\
    \rule{0pt}{4ex}Chain Rule notation 2 & $(f\circ g)(x)$ & $(f'\circ g)(x) \cdot g'(x)$
  \end{tabular}
}

\DeclareFactoid{FTC1}{%
  Let $F(x)$ be the antiderivative of $f(x)$:
  \[
    \int_a^b f(x) \, dx = F(b) - F(a)
  \]%
}

\DeclareFactoid{FTC2}{%
  \[
    \frac{d}{dx}\int_{a(x)}^{b(x)}f(t)dt = f(b(x))\cdot b'(x) - f(a(x)) \cdot a'(x)
  \]%
}

\DeclareFactoid{integral area}{%
  The area between two curves can be described:
  \[
    \int_a^b\int_{\text{Bottom}(x)}^{\text{Top}(x)}1dydx = \int_a^b[\text{Top}(x) - \text{Bottom}(x)]dx
  \]
  Or
  \[
    \int_c^d\int_{\text{Right}(y)}^{\text{Left}(y)}1dxdy = \int_c^d[\text{Left}(x) - \text{Right}(x)]dy
  \]%
}

\makeatletter
\DeclareFactoid{maclaurin}{%
  \setbox0=\hbox{$\displaystyle\sum_{k = 0}^{k = 0}$}
  \setbox0=\hbox{\vrule height\dimexpr\ht0+.5ex\relax depth\dimexpr\dp0+.5ex\relax width0pt}
  \setbox2=\hbox{\vrule height2.5ex depth1ex width0pt}
  \def\bigmathstrut{\unhcopy0}
  \def\bigstrut{\unhcopy2}
  \def\thickrule{\noalign{\hrule height.8pt}}
  \def\thinrule{\noalign{\hrule}}
  \def\verythinrule{\noalign{\hrule height.2pt}}
  \def\tablerow#1#2#3#4#5#6#7#8#9{%
    \@tablerow{%
      \bigmathstrut&%
      $\m@th\displaystyle #1$&%
      $\m@th\displaystyle #2$&${}#3{}\m@th$&%
      $\m@th\displaystyle #4$&${}#5{}\m@th$&%
      $\m@th\displaystyle #6$&${}#7{}\m@th$&%
      $\m@th\displaystyle #8$&${}#9\dotsb\m@th$&%
    }%
  }
  \def\@tablerow#1#2{%
    #1%
    $\m@th\displaystyle #2$
  }
  \vbox{\tabskip=0pt \offinterlineskip\halign{%
    #\tabskip=1em&\hfil#\hfil&\tabskip=0pt%
      \hfil#\hfil&\hfil#\hfil&%
      \hfil#\hfil&\hfil#\hfil&%
      \hfil#\hfil&\hfil#\hfil&%
      \hfil#\hfil&\hfil#\hfil\tabskip=2em&%
      #\hfil\cr \thickrule
    \bigstrut&Function&\omit Maclaurin series\hfil\hidewidth&&&&&&&&Sigma notation\cr \thinrule
    \tablerow
      {e^x}
      1 + {\frac x {1!}} + {\frac {x^2} {2!}} + {\frac {x^3} {3!}} +
      {\sum_{k = 0}^\infty \frac {x^k} {k!}}\cr \verythinrule
    \tablerow
      {\sin(x)}
      {\frac x {1!}} - {\frac {x^3} {3!}} + {\frac {x^5} {5!}} - {\frac {x^7} {7!}} +
      {\sum_{k = 0}^\infty (-1)^k \frac {x^{2k + 1}} {(2k + 1)!}}\cr \verythinrule
    \tablerow
      {\cos(x)}
      1 - {\frac {x^2} {2!}} + {\frac {x^4} {4!}} - {\frac {x^6} {6!}} +
      {\sum_{k = 0}^\infty (-1)^k \frac {x^{2k}} {(2k)!}}\cr \verythinrule
    \tablerow
      {\frac 1 {1 - x}}
      1 + x + {x^2} + {x^3} +
      {\sum_{k = 0}^\infty x^k},\quad\hfill $-1 < x < 1$\cr \verythinrule
    \tablerow
      {\ln(1 + x)}
      {\frac x 1} - {\frac {x^2} 2} + {\frac {x^3} 3} - {\frac {x^4} 4} +
      {\sum_{k = 1}^\infty \frac {(-1)^{k + 1} x^k} k},\quad\hfill $-1 < x \le 1$\cr \thickrule
    }}
  }
\makeatother

